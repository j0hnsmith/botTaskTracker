(()=>{var gt=/ðŸ–•JS_DSðŸš€/.source,Ye=gt.slice(0,5),et=gt.slice(4),se="datastar-fetch",Ae="datastar-signal-patch",N=Object.hasOwn??Object.prototype.hasOwnProperty.call,_=e=>e!==null&&typeof e=="object"&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null),Dt=e=>{for(let t in e)if(N(e,t))return!1;return!0},Te=(e,t)=>{for(let r in e){let n=e[r];_(n)||Array.isArray(n)?Te(n,t):e[r]=t(n)}},ze=e=>{let t={};for(let[r,n]of e){let l=r.split("."),i=l.pop(),a=l.reduce((s,o)=>s[o]??={},t);a[i]=n}return t},ve=[],He=[],Le=0,ge=0,Ie=0,Re,P,Ee=0,j=()=>{Le++},F=()=>{--Le||(bt(),V())},D=e=>{Re=P,P=e},W=()=>{P=Re,Re=void 0},be=e=>Wt.bind(0,{previousValue:e,t:e,e:1}),_e=Symbol("computed"),tt=e=>{let t=Ut.bind(0,{e:17,getter:e});return t[_e]=1,t},H=e=>{let t={d:e,e:2};P&&Je(t,P),D(t),j();try{t.d()}finally{F(),W()}return St.bind(0,t)},bt=()=>{for(;ge<Ie;){let e=He[ge];He[ge++]=void 0,xt(e,e.e&=-65)}ge=0,Ie=0},rt=e=>"getter"in e?wt(e):Et(e,e.t),wt=e=>{D(e),At(e);try{let t=e.t;return t!==(e.t=e.getter(t))}finally{W(),$t(e)}},Et=(e,t)=>(e.e=1,e.previousValue!==(e.previousValue=t)),Ke=e=>{let t=e.e;if(!(t&64)){e.e=t|64;let r=e.r;r?Ke(r.o):He[Ie++]=e}},xt=(e,t)=>{if(t&16||t&32&&Mt(e.s,e)){D(e),At(e),j();try{e.d()}finally{F(),W(),$t(e)}return}t&32&&(e.e=t&-33);let r=e.s;for(;r;){let n=r.c,l=n.e;l&64&&xt(n,n.e=l&-65),r=r.i}},Wt=(e,...t)=>{if(t.length){if(e.t!==(e.t=t[0])){e.e=17;let n=e.r;return n&&(Bt(n),Le||bt()),!0}return!1}let r=e.t;if(e.e&16&&Et(e,r)){let n=e.r;n&&Me(n)}return P&&Je(e,P),r},Ut=e=>{let t=e.e;if(t&16||t&32&&Mt(e.s,e)){if(wt(e)){let r=e.r;r&&Me(r)}}else t&32&&(e.e=t&-33);return P&&Je(e,P),e.t},St=e=>{let t=e.s;for(;t;)t=$e(t,e);let r=e.r;r&&$e(r),e.e=0},Je=(e,t)=>{let r=t.a;if(r&&r.c===e)return;let n=r?r.i:t.s;if(n&&n.c===e){n.m=Ee,t.a=n;return}let l=e.p;if(l&&l.m===Ee&&l.o===t)return;let i=t.a=e.p={m:Ee,c:e,o:t,l:r,i:n,u:l};n&&(n.l=i),r?r.i=i:t.s=i,l?l.n=i:e.r=i},$e=(e,t=e.o)=>{let r=e.c,n=e.l,l=e.i,i=e.n,a=e.u;if(l?l.l=n:t.a=n,n?n.i=l:t.s=l,i?i.u=a:r.p=a,a)a.n=i;else if(!(r.r=i))if("getter"in r){let s=r.s;if(s){r.e=17;do s=$e(s,r);while(s)}}else"previousValue"in r||St(r);return l},Bt=e=>{let t=e.n,r;e:for(;;){let n=e.o,l=n.e;if(l&60?l&12?l&4?!(l&48)&&zt(e,n)?(n.e=l|40,l&=1):l=0:n.e=l&-9|32:l=0:n.e=l|32,l&2&&Ke(n),l&1){let i=n.r;if(i){let a=(e=i).n;a&&(r={t,f:r},t=a);continue}}if(e=t){t=e.n;continue}for(;r;)if(e=r.t,r=r.f,e){t=e.n;continue e}break}},At=e=>{Ee++,e.a=void 0,e.e=e.e&-57|4},$t=e=>{let t=e.a,r=t?t.i:e.s;for(;r;)r=$e(r,e);e.e&=-5},Mt=(e,t)=>{let r,n=0,l=!1;e:for(;;){let i=e.c,a=i.e;if(t.e&16)l=!0;else if((a&17)===17){if(rt(i)){let s=i.r;s.n&&Me(s),l=!0}}else if((a&33)===33){(e.n||e.u)&&(r={t:e,f:r}),e=i.s,t=i,++n;continue}if(!l){let s=e.i;if(s){e=s;continue}}for(;n--;){let s=t.r,o=s.n;if(o?(e=r.t,r=r.f):e=s,l){if(rt(t)){o&&Me(s),t=e.o;continue}l=!1}else t.e&=-33;if(t=e.o,e.i){e=e.i;continue e}}return l}},Me=e=>{do{let t=e.o,r=t.e;(r&48)===32&&(t.e=r|16,r&2&&Ke(t))}while(e=e.n)},zt=(e,t)=>{let r=t.a;for(;r;){if(r===e)return!0;r=r.l}return!1},xe=e=>{let t=oe,r=e.split(".");for(let n of r){if(t==null||!N(t,n))return;t=t[n]}return t},Se=(e,t="")=>{let r=Array.isArray(e);if(r||_(e)){let n=r?[]:{};for(let i in e)n[i]=be(Se(e[i],`${t+i}.`));let l=be(0);return new Proxy(n,{get(i,a){if(!(a==="toJSON"&&!N(n,a)))return r&&a in Array.prototype?(l(),n[a]):typeof a=="symbol"?n[a]:((!N(n,a)||n[a]()==null)&&(n[a]=be(""),V(t+a,""),l(l()+1)),n[a]())},set(i,a,s){let o=t+a;if(r&&a==="length"){let u=n[a]-s;if(n[a]=s,u>0){let c={};for(let f=s;f<n[a];f++)c[f]=null;V(t.slice(0,-1),c),l(l()+1)}}else if(N(n,a))if(s==null)delete n[a];else if(N(s,_e))n[a]=s,V(o,"");else{let u=n[a](),c=`${o}.`;if(_(u)&&_(s)){for(let f in u)N(s,f)||(delete u[f],V(c+f,null));for(let f in s){let h=s[f];u[f]!==h&&(u[f]=h)}}else n[a](Se(s,c))&&V(o,s)}else s!=null&&(N(s,_e)?(n[a]=s,V(o,"")):(n[a]=be(Se(s,`${o}.`)),V(o,s)),l(l()+1));return!0},deleteProperty(i,a){return delete n[a],l(l()+1),!0},ownKeys(){return l(),Reflect.ownKeys(n)},has(i,a){return l(),a in n}})}return e},V=(e,t)=>{if(e!==void 0&&t!==void 0&&ve.push([e,t]),!Le&&ve.length){let r=ze(ve);ve.length=0,document.dispatchEvent(new CustomEvent(Ae,{detail:r}))}},Y=(e,{ifMissing:t}={})=>{j();for(let r in e)e[r]==null?t||delete oe[r]:kt(e[r],r,oe,"",t);F()},M=(e,t)=>Y(ze(e),t),kt=(e,t,r,n,l)=>{if(_(e)){N(r,t)&&(_(r[t])||Array.isArray(r[t]))||(r[t]={});for(let i in e)e[i]==null?l||delete r[t][i]:kt(e[i],i,r[t],`${n+t}.`,l)}else l&&N(r,t)||(r[t]=e)},nt=e=>typeof e=="string"?RegExp(e.replace(/^\/|\/$/g,"")):e,de=({include:e=/.*/,exclude:t=/(?!)/}={},r=oe)=>{let n=nt(e),l=nt(t),i=[],a=[[r,""]];for(;a.length;){let[s,o]=a.pop();for(let u in s){let c=o+u;_(s[u])?a.push([s[u],`${c}.`]):n.test(c)&&!l.test(c)&&i.push([c,xe(c)])}}return ze(i)},oe=Se({}),Q=e=>e instanceof HTMLElement||e instanceof SVGElement||e instanceof MathMLElement,Ge=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([a-z])([0-9]+)/gi,"$1-$2").replace(/([0-9]+)([a-z])/gi,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),Kt=e=>Ge(e).replace(/-/g,"_"),Ze=e=>{try{return JSON.parse(e)}catch{return Function(`return (${e})`)()}},Tt={camel:e=>e.replace(/-[a-z]/g,t=>t[1].toUpperCase()),snake:e=>e.replace(/-/g,"_"),pascal:e=>e[0].toUpperCase()+Tt.camel(e.slice(1))},U=(e,t,r="camel")=>{for(let n of t.get("case")||[r])e=Tt[n]?.(e)||e;return e},fe=e=>`data-${e}`,Jt="https://data-star.dev/errors",le=(e,t,r={})=>{Object.assign(r,e);let n=new Error,l=Kt(t),i=new URLSearchParams({metadata:JSON.stringify(r)}).toString(),a=JSON.stringify(r,null,2);return n.message=`${t}
More info: ${Jt}/${l}?${i}
Context: ${a}`,n},ae=new Map,De=new Map,Lt=new Map,Gt=new Proxy({},{get:(e,t)=>ae.get(t)?.apply,has:(e,t)=>ae.has(t),ownKeys:()=>Reflect.ownKeys(ae),set:()=>!1,deleteProperty:()=>!1}),ue=new Map,we=[],We=new Set,Zt=new WeakSet,w=e=>{we.push(e),we.length===1&&setTimeout(()=>{for(let t of we)We.add(t.name),De.set(t.name,t);we.length=0,tr(),We.clear()})},R=e=>{ae.set(e.name,e)};document.addEventListener(se,e=>{let t=Lt.get(e.detail.type);t&&t.apply({error:le.bind(0,{plugin:{type:"watcher",name:t.name},element:{id:e.target.id,tag:e.target.tagName}})},e.detail.argsRaw)});var Nt=e=>{Lt.set(e.name,e)},lt=e=>{for(let t of e){let r=ue.get(t);if(r&&ue.delete(t))for(let n of r.values())for(let l of n.values())l()}},qt=fe("ignore"),Qt=`[${qt}]`,Pt=e=>e.hasAttribute(`${qt}__self`)||!!e.closest(Qt),ke=(e,t)=>{for(let r of e)if(!Pt(r))for(let n in r.dataset)Ct(r,n.replace(/[A-Z]/g,"-$&").toLowerCase(),r.dataset[n],t)},Xt=e=>{for(let{target:t,type:r,attributeName:n,addedNodes:l,removedNodes:i}of e)if(r==="childList"){for(let a of i)Q(a)&&(lt([a]),lt(a.querySelectorAll("*")));for(let a of l)Q(a)&&(ke([a]),ke(a.querySelectorAll("*")))}else if(r==="attributes"&&n.startsWith("data-")&&Q(t)&&!Pt(t)){let a=n.slice(5),s=t.getAttribute(n);if(s===null){let o=ue.get(t);if(o){let u=o.get(a);if(u){for(let c of u.values())c();o.delete(a)}}}else Ct(t,a,s)}},Yt=new MutationObserver(Xt),er=e=>{let[t,...r]=e.split("__"),[n,l]=t.split(/:(.+)/),i=new Map;for(let a of r){let[s,...o]=a.split(".");i.set(s,new Set(o))}return{pluginName:n,key:l,mods:i}},tr=(e=document.documentElement,t=!0)=>{Q(e)&&ke([e],!0),ke(e.querySelectorAll("*"),!0),t&&(Yt.observe(e,{subtree:!0,childList:!0,attributes:!0}),Zt.add(e))},Ct=(e,t,r,n)=>{{let l=t,{pluginName:i,key:a,mods:s}=er(l),o=De.get(i);if((!n||We.has(i))&&o){let u={el:e,rawKey:l,mods:s,error:le.bind(0,{plugin:{type:"attribute",name:o.name},element:{id:e.id,tag:e.tagName},expression:{rawKey:l,key:a,value:r}}),key:a,value:r,loadedPluginNames:{actions:new Set(ae.keys()),attributes:new Set(De.keys())},rx:void 0},c=o.requirement&&(typeof o.requirement=="string"?o.requirement:o.requirement.key)||"allowed",f=o.requirement&&(typeof o.requirement=="string"?o.requirement:o.requirement.value)||"allowed",h=a!=null&&a!=="",d=r!=null&&r!=="";if(h){if(c==="denied")throw u.error("KeyNotAllowed")}else if(c==="must")throw u.error("KeyRequired");if(d){if(f==="denied")throw u.error("ValueNotAllowed")}else if(f==="must")throw u.error("ValueRequired");if(c==="exclusive"||f==="exclusive"){if(h&&d)throw u.error("KeyAndValueProvided");if(!h&&!d)throw u.error("KeyOrValueRequired")}let m=new Map;if(d){let g;u.rx=(...E)=>(g||(g=rr(r,{returnsValue:o.returnsValue,argNames:o.argNames,cleanups:m})),g(e,...E))}let y=o.apply(u);y&&m.set("attribute",y);let v=ue.get(e);if(v){let g=v.get(l);if(g)for(let E of g.values())E()}else v=new Map,ue.set(e,v);v.set(l,m)}}},rr=(e,{returnsValue:t=!1,argNames:r=[],cleanups:n=new Map}={})=>{let l="";if(t){let o=/(\/(\\\/|[^/])*\/|"(\\"|[^"])*"|'(\\'|[^'])*'|`(\\`|[^`])*`|\(\s*((function)\s*\(\s*\)|(\(\s*\))\s*=>)\s*(?:\{[\s\S]*?\}|[^;){]*)\s*\)\s*\(\s*\)|[^;])+/gm,u=e.trim().match(o);if(u){let c=u.length-1,f=u[c].trim();f.startsWith("return")||(u[c]=`return (${f});`),l=u.join(`;
`)}}else l=e.trim();let i=new Map,a=RegExp(`(?:${Ye})(.*?)(?:${et})`,"gm"),s=0;for(let o of l.matchAll(a)){let u=o[1],c=`__escaped${s++}`;i.set(c,u),l=l.replace(Ye+u+et,c)}l=l.replace(/\$\['([a-zA-Z_$\d][\w$]*)'\]/g,"$$$1").replace(/\$([a-zA-Z_\d]\w*(?:[.-]\w+)*)/g,(o,u)=>u.split(".").reduce((c,f)=>`${c}['${f}']`,"$")),l=l.replaceAll(/@([A-Za-z_$][\w$]*)\(/g,'__action("$1",evt,');for(let[o,u]of i)l=l.replace(o,u);try{let o=Function("el","$","__action","evt",...r,l);return(u,...c)=>{let f=(h,d,...m)=>{let y=le.bind(0,{plugin:{type:"action",name:h},element:{id:u.id,tag:u.tagName},expression:{fnContent:l,value:e}}),v=Gt[h];if(v)return v({el:u,evt:d,error:y,cleanups:n},...m);throw y("UndefinedAction")};try{return o(u,oe,f,void 0,...c)}catch(h){throw console.error(h),le({element:{id:u.id,tag:u.tagName},expression:{fnContent:l,value:e},error:h.message},"ExecuteExpression")}}}catch(o){throw console.error(o),le({expression:{fnContent:l,value:e},error:o.message},"GenerateExpression")}};R({name:"peek",apply(e,t){D();try{return t()}finally{W()}}});R({name:"setAll",apply(e,t,r){D();let n=de(r);Te(n,()=>t),Y(n),W()}});R({name:"toggleAll",apply(e,t){D();let r=de(t);Te(r,n=>!n),Y(r),W()}});var me=(e,t,r=!0)=>R({name:e,apply:async({el:n,evt:l,error:i,cleanups:a},s,{selector:o,headers:u,contentType:c="json",filterSignals:{include:f=/.*/,exclude:h=/(^|\.)_/}={},openWhenHidden:d=r,payload:m,requestCancellation:y="auto",retry:v="auto",retryInterval:g=1e3,retryScaler:E=2,retryMaxWaitMs:q=3e4,retryMaxCount:B=10}={})=>{let ee=y instanceof AbortController?y:new AbortController;y==="auto"&&(a.get(`@${e}`)?.(),a.set(`@${e}`,async()=>{ee.abort(),await Promise.resolve()}));let k=null;try{if(!s?.length)throw i("FetchNoUrlProvided",{action:R});let T={Accept:"text/event-stream, text/html, application/json","Datastar-Request":!0};c==="json"&&(T["Content-Type"]="application/json");let pe=Object.assign({},T,u),z={method:t,headers:pe,openWhenHidden:d,retry:v,retryInterval:g,retryScaler:E,retryMaxWaitMs:q,retryMaxCount:B,signal:ee.signal,onopen:async p=>{p.status>=400&&I(nr,n,{status:p.status.toString()})},onmessage:p=>{if(!p.event.startsWith("datastar"))return;let C=p.event,b={};for(let x of p.data.split(`
`)){let S=x.indexOf(" "),O=x.slice(0,S),qe=x.slice(S+1);(b[O]||=[]).push(qe)}let A=Object.fromEntries(Object.entries(b).map(([x,S])=>[x,S.join(`
`)]));I(C,n,A)},onerror:p=>{if(at(p))throw p("FetchExpectedTextEventStream",{url:s});p&&(console.error(p.message),I(lr,n,{message:p.message}))}},K=new URL(s,document.baseURI),J=new URLSearchParams(K.search);if(c==="json"){D(),m=m!==void 0?m:de({include:f,exclude:h}),W();let p=JSON.stringify(m);t==="GET"?J.set("datastar",p):z.body=p}else if(c==="form"){let p=o?document.querySelector(o):n.closest("form");if(!p)throw i("FetchFormNotFound",{action:R,selector:o});if(!p.noValidate&&!p.checkValidity()){p.reportValidity();return}let C=new FormData(p),b=n;if(n===p&&l instanceof SubmitEvent)b=l.submitter;else{let S=O=>O.preventDefault();p.addEventListener("submit",S),k=()=>{p.removeEventListener("submit",S)}}if(b instanceof HTMLButtonElement){let S=b.getAttribute("name");S&&C.append(S,b.value)}let A=p.getAttribute("enctype")==="multipart/form-data";A||(pe["Content-Type"]="application/x-www-form-urlencoded");let x=new URLSearchParams(C);if(t==="GET")for(let[S,O]of x)J.append(S,O);else A?z.body=C:z.body=x}else throw i("FetchInvalidContentType",{action:R,contentType:c});I(Ot,n,{}),K.search=J.toString();try{await cr(K.toString(),n,z)}catch(p){if(!at(p))throw i("FetchFailed",{method:t,url:s,error:p.message})}}finally{I(Vt,n,{}),k?.(),a.delete(`@${e}`)}}});me("get","GET",!1);me("patch","PATCH");me("post","POST");me("put","PUT");me("delete","DELETE");var Ot="started",Vt="finished",nr="error",lr="retrying",ar="retries-failed",I=(e,t,r)=>document.dispatchEvent(new CustomEvent(se,{detail:{type:e,el:t,argsRaw:r}})),at=e=>`${e}`.includes("text/event-stream"),ir=async(e,t)=>{let r=e.getReader(),n=await r.read();for(;!n.done;)t(n.value),n=await r.read()},sr=e=>{let t,r,n,l=!1;return i=>{t?t=ur(t,i):(t=i,r=0,n=-1);let a=t.length,s=0;for(;r<a;){l&&(t[r]===10&&(s=++r),l=!1);let o=-1;for(;r<a&&o===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-s);break;case 13:l=!0;case 10:o=r;break}if(o===-1)break;e(t.subarray(s,o),n),s=r,n=-1}s===a?t=void 0:s&&(t=t.subarray(s),r-=s)}},or=(e,t,r)=>{let n=it(),l=new TextDecoder;return(i,a)=>{if(!i.length)r?.(n),n=it();else if(a>0){let s=l.decode(i.subarray(0,a)),o=a+(i[a+1]===32?2:1),u=l.decode(i.subarray(o));switch(s){case"data":n.data=n.data?`${n.data}
${u}`:u;break;case"event":n.event=u;break;case"id":e(n.id=u);break;case"retry":{let c=+u;Number.isNaN(c)||t(n.retry=c);break}}}}},ur=(e,t)=>{let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r},it=()=>({data:"",event:"",id:"",retry:void 0}),cr=(e,t,{signal:r,headers:n,onopen:l,onmessage:i,onclose:a,onerror:s,openWhenHidden:o,fetch:u,retry:c="auto",retryInterval:f=1e3,retryScaler:h=2,retryMaxWaitMs:d=3e4,retryMaxCount:m=10,responseOverrides:y,...v})=>new Promise((g,E)=>{let q={...n},B,ee=()=>{B.abort(),document.hidden||p()};o||document.addEventListener("visibilitychange",ee);let k,T=()=>{document.removeEventListener("visibilitychange",ee),clearTimeout(k),B.abort()};r?.addEventListener("abort",()=>{T(),g()});let pe=u||window.fetch,z=l||(()=>{}),K=0,J=f,p=async()=>{B=new AbortController;let C=B.signal;try{let b=await pe(e,{...v,headers:q,signal:C});await z(b);let A=async(L,te,Ce,he,..._t)=>{let Xe={[Ce]:await te.text()};for(let Oe of _t){let Ve=te.headers.get(`datastar-${Ge(Oe)}`);if(he){let ye=he[Oe];ye&&(Ve=typeof ye=="string"?ye:JSON.stringify(ye))}Ve&&(Xe[Oe]=Ve)}I(L,t,Xe),T(),g()},x=b.status,S=x===204,O=x>=300&&x<400,qe=x>=400&&x<600;if(x!==200){if(a?.(),c!=="never"&&!S&&!O&&(c==="always"||c==="error"&&qe)){clearTimeout(k),k=setTimeout(p,f);return}T(),g();return}K=0,f=J;let Pe=b.headers.get("Content-Type");if(Pe?.includes("text/html"))return await A("datastar-patch-elements",b,"elements",y,"selector","mode","namespace","useViewTransition");if(Pe?.includes("application/json"))return await A("datastar-patch-signals",b,"signals",y,"onlyIfMissing");if(Pe?.includes("text/javascript")){let L=document.createElement("script"),te=b.headers.get("datastar-script-attributes");if(te)for(let[Ce,he]of Object.entries(JSON.parse(te)))L.setAttribute(Ce,he);L.textContent=await b.text(),document.head.appendChild(L),T();return}if(await ir(b.body,sr(or(L=>{L?q["last-event-id"]=L:delete q["last-event-id"]},L=>{J=f=L},i))),a?.(),c==="always"&&!O){clearTimeout(k),k=setTimeout(p,f);return}T(),g()}catch(b){if(!C.aborted)try{let A=s?.(b)||f;clearTimeout(k),k=setTimeout(p,A),f=Math.min(f*h,d),++K>=m?(I(ar,t,{}),T(),E("Max retries reached.")):console.error(`Datastar failed to reach ${e.toString()} retrying in ${A}ms.`)}catch(A){T(),E(A)}}};p()});w({name:"attr",requirement:{value:"must"},returnsValue:!0,apply({el:e,key:t,rx:r}){let n=(s,o)=>{o===""||o===!0?e.setAttribute(s,""):o===!1||o==null?e.removeAttribute(s):typeof o=="string"?e.setAttribute(s,o):e.setAttribute(s,JSON.stringify(o))},l=t?()=>{i.disconnect();let s=r();n(t,s),i.observe(e,{attributeFilter:[t]})}:()=>{i.disconnect();let s=r(),o=Object.keys(s);for(let u of o)n(u,s[u]);i.observe(e,{attributeFilter:o})},i=new MutationObserver(l),a=H(l);return()=>{i.disconnect(),a()}}});var dr=/^data:(?<mime>[^;]+);base64,(?<contents>.*)$/,st=Symbol("empty"),ot=fe("bind");w({name:"bind",requirement:"exclusive",apply({el:e,key:t,mods:r,value:n,error:l}){let i=t!=null?U(t,r):n,a=(d,m)=>m==="number"?+d.value:d.value,s=d=>{e.value=`${d}`};if(e instanceof HTMLInputElement)switch(e.type){case"range":case"number":a=(d,m)=>m==="string"?d.value:+d.value;break;case"checkbox":a=(d,m)=>d.value!=="on"?m==="boolean"?d.checked:d.checked?d.value:"":m==="string"?d.checked?d.value:"":d.checked,s=d=>{e.checked=typeof d=="string"?d===e.value:d};break;case"radio":e.getAttribute("name")?.length||e.setAttribute("name",i),a=(d,m)=>d.checked?m==="number"?+d.value:d.value:st,s=d=>{e.checked=d===(typeof d=="number"?+e.value:e.value)};break;case"file":{let d=()=>{let m=[...e.files||[]],y=[];Promise.all(m.map(v=>new Promise(g=>{let E=new FileReader;E.onload=()=>{if(typeof E.result!="string")throw l("InvalidFileResultType",{resultType:typeof E.result});let q=E.result.match(dr);if(!q?.groups)throw l("InvalidDataUri",{result:E.result});y.push({name:v.name,contents:q.groups.contents,mime:q.groups.mime})},E.onloadend=()=>g(),E.readAsDataURL(v)}))).then(()=>{M([[i,y]])})};return e.addEventListener("change",d),e.addEventListener("input",d),()=>{e.removeEventListener("change",d),e.removeEventListener("input",d)}}}else if(e instanceof HTMLSelectElement){if(e.multiple){let d=new Map;a=m=>[...m.selectedOptions].map(y=>{let v=d.get(y.value);return v==="string"||v==null?y.value:+y.value}),s=m=>{for(let y of e.options)m.includes(y.value)?(d.set(y.value,"string"),y.selected=!0):m.includes(+y.value)?(d.set(y.value,"number"),y.selected=!0):y.selected=!1}}}else e instanceof HTMLTextAreaElement||(a=d=>"value"in d?d.value:d.getAttribute("value"),s=d=>{"value"in e?e.value=d:e.setAttribute("value",d)});let o=xe(i),u=typeof o,c=i;if(Array.isArray(o)&&!(e instanceof HTMLSelectElement&&e.multiple)){let d=t||n,m=document.querySelectorAll(`[${ot}\\:${CSS.escape(d)}],[${ot}="${CSS.escape(d)}"]`),y=[],v=0;for(let g of m){if(y.push([`${c}.${v}`,a(g,"none")]),e===g)break;v++}M(y,{ifMissing:!0}),c=`${c}.${v}`}else M([[c,a(e,u)]],{ifMissing:!0});let f=()=>{let d=xe(c);if(d!=null){let m=a(e,typeof d);m!==st&&M([[c,m]])}};e.addEventListener("input",f),e.addEventListener("change",f);let h=H(()=>{s(xe(c))});return()=>{h(),e.removeEventListener("input",f),e.removeEventListener("change",f)}}});w({name:"class",requirement:{value:"must"},returnsValue:!0,apply({key:e,el:t,mods:r,rx:n}){e&&=U(e,r,"kebab");let l,i=()=>{a.disconnect(),l=e?{[e]:n()}:n();for(let o in l){let u=o.split(/\s+/).filter(c=>c.length>0);if(l[o])for(let c of u)t.classList.contains(c)||t.classList.add(c);else for(let c of u)t.classList.contains(c)&&t.classList.remove(c)}a.observe(t,{attributeFilter:["class"]})},a=new MutationObserver(i),s=H(i);return()=>{a.disconnect(),s();for(let o in l){let u=o.split(/\s+/).filter(c=>c.length>0);for(let c of u)t.classList.remove(c)}}}});w({name:"computed",requirement:{value:"must"},returnsValue:!0,apply({key:e,mods:t,rx:r,error:n}){if(e)M([[U(e,t),tt(r)]]);else{let l=Object.assign({},r());Te(l,i=>{if(typeof i=="function")return tt(i);throw n("ComputedExpectedFunction")}),Y(l)}}});w({name:"effect",requirement:{key:"denied",value:"must"},apply:({rx:e})=>H(e)});w({name:"indicator",requirement:"exclusive",apply({el:e,key:t,mods:r,value:n}){let l=t!=null?U(t,r):n;M([[l,!1]]);let i=a=>{let{type:s,el:o}=a.detail;if(o===e)switch(s){case Ot:M([[l,!0]]);break;case Vt:M([[l,!1]]);break}};return document.addEventListener(se,i),()=>{M([[l,!1]]),document.removeEventListener(se,i)}}});var ie=e=>{if(!e||e.size<=0)return 0;for(let t of e){if(t.endsWith("ms"))return+t.replace("ms","");if(t.endsWith("s"))return+t.replace("s","")*1e3;try{return Number.parseFloat(t)}catch{}}return 0},ne=(e,t,r=!1)=>e?e.has(t.toLowerCase()):r,jt=(e,t)=>(...r)=>{setTimeout(()=>{e(...r)},t)},ut=(e,t,r=!0,n=!1,l=!1)=>{let i=null,a=0;return(...s)=>{r&&!a?(e(...s),i=null):i=s,(!a||l)&&(a&&clearTimeout(a),a=setTimeout(()=>{n&&i!==null&&e(...i),i=null,a=0},t))}},Qe=(e,t)=>{let r=t.get("delay");if(r){let i=ie(r);e=jt(e,i)}let n=t.get("debounce");if(n){let i=ie(n),a=ne(n,"leading",!1),s=!ne(n,"notrailing",!1);e=ut(e,i,a,s,!0)}let l=t.get("throttle");if(l){let i=ie(l),a=!ne(l,"noleading",!1),s=ne(l,"trailing",!1);e=ut(e,i,a,s)}return e},Ft=!!document.startViewTransition,Ne=(e,t)=>{if(t.has("viewtransition")&&Ft){let r=e;e=(...n)=>document.startViewTransition(()=>r(...n))}return e};w({name:"init",requirement:{key:"denied",value:"must"},apply({rx:e,mods:t}){let r=()=>{j(),e(),F()};r=Ne(r,t);let n=0,l=t.get("delay");l&&(n=ie(l),n>0&&(r=jt(r,n))),r()}});w({name:"json-signals",requirement:{key:"denied"},apply({el:e,value:t,mods:r}){let n=r.has("terse")?0:2,l={};t&&(l=Ze(t));let i=()=>{a.disconnect(),e.textContent=JSON.stringify(de(l),null,n),a.observe(e,{childList:!0,characterData:!0,subtree:!0})},a=new MutationObserver(i),s=H(i);return()=>{a.disconnect(),s()}}});w({name:"on",requirement:"must",argNames:["evt"],apply({el:e,key:t,mods:r,rx:n}){let l=e;r.has("window")&&(l=window);let i=o=>{o&&(r.has("prevent")&&o.preventDefault(),r.has("stop")&&o.stopPropagation()),j(),n(o),F()};i=Ne(i,r),i=Qe(i,r);let a={capture:r.has("capture"),passive:r.has("passive"),once:r.has("once")};if(r.has("outside")){l=document;let o=i;i=u=>{e.contains(u?.target)||o(u)}}let s=U(t,r,"kebab");if((s===se||s===Ae)&&(l=document),e instanceof HTMLFormElement&&s==="submit"){let o=i;i=u=>{u?.preventDefault(),o(u)}}return l.addEventListener(s,i,a),()=>{l.removeEventListener(s,i)}}});var fr=(e,t,r)=>Math.max(t,Math.min(r,e)),je=new WeakSet;w({name:"on-intersect",requirement:{key:"denied",value:"must"},apply({el:e,mods:t,rx:r}){let n=()=>{j(),r(),F()};n=Ne(n,t),n=Qe(n,t);let l={threshold:0};t.has("full")?l.threshold=1:t.has("half")?l.threshold=.5:t.get("threshold")&&(l.threshold=fr(Number(t.get("threshold")),0,100)/100);let i=t.has("exit"),a=new IntersectionObserver(s=>{for(let o of s)o.isIntersecting!==i&&(n(),a&&je.has(e)&&a.disconnect())},l);return a.observe(e),t.has("once")&&je.add(e),()=>{t.has("once")||je.delete(e),a&&(a.disconnect(),a=null)}}});w({name:"on-interval",requirement:{key:"denied",value:"must"},apply({mods:e,rx:t}){let r=()=>{j(),t(),F()};r=Ne(r,e);let n=1e3,l=e.get("duration");l&&(n=ie(l),ne(l,"leading",!1)&&r());let i=setInterval(r,n);return()=>{clearInterval(i)}}});w({name:"on-signal-patch",requirement:{value:"must"},argNames:["patch"],returnsValue:!0,apply({el:e,key:t,mods:r,rx:n,error:l}){if(t&&t!=="filter")throw l("KeyNotAllowed");let i=fe(`${this.name}-filter`),a=e.getAttribute(i),s={};a&&(s=Ze(a));let o=!1,u=Qe(c=>{if(o)return;let f=de(s,c.detail);if(!Dt(f)){o=!0,j();try{n(f)}finally{F(),o=!1}}},r);return document.addEventListener(Ae,u),()=>{document.removeEventListener(Ae,u)}}});w({name:"ref",requirement:"exclusive",apply({el:e,key:t,mods:r,value:n}){let l=t!=null?U(t,r):n;M([[l,e]])}});var ct="none",dt="display";w({name:"show",requirement:{key:"denied",value:"must"},returnsValue:!0,apply({el:e,rx:t}){let r=()=>{n.disconnect(),t()?e.style.display===ct&&e.style.removeProperty(dt):e.style.setProperty(dt,ct),n.observe(e,{attributeFilter:["style"]})},n=new MutationObserver(r),l=H(r);return()=>{n.disconnect(),l()}}});w({name:"signals",returnsValue:!0,apply({key:e,mods:t,rx:r}){let n=t.has("ifmissing");if(e)e=U(e,t),M([[e,r?.()]],{ifMissing:n});else{let l=Object.assign({},r?.());Y(l,{ifMissing:n})}}});w({name:"style",requirement:{value:"must"},returnsValue:!0,apply({key:e,el:t,rx:r}){let{style:n}=t,l=new Map,i=(u,c)=>{let f=l.get(u);!c&&c!==0?f!==void 0&&(f?n.setProperty(u,f):n.removeProperty(u)):(f===void 0&&l.set(u,n.getPropertyValue(u)),n.setProperty(u,String(c)))},a=()=>{if(s.disconnect(),e)i(e,r());else{let u=r();for(let[c,f]of l)c in u||(f?n.setProperty(c,f):n.removeProperty(c));for(let c in u)i(Ge(c),u[c])}s.observe(t,{attributeFilter:["style"]})},s=new MutationObserver(a),o=H(a);return()=>{s.disconnect(),o();for(let[u,c]of l)c?n.setProperty(u,c):n.removeProperty(u)}}});w({name:"text",requirement:{key:"denied",value:"must"},returnsValue:!0,apply({el:e,rx:t}){let r=()=>{n.disconnect(),e.textContent=`${t()}`,n.observe(e,{childList:!0,characterData:!0,subtree:!0})},n=new MutationObserver(r),l=H(r);return()=>{n.disconnect(),l()}}});var ft=(e,t)=>e.includes(t),mr=["remove","outer","inner","replace","prepend","append","before","after"],pr=["html","svg","mathml"];Nt({name:"datastar-patch-elements",apply(e,{selector:t="",mode:r="outer",namespace:n="html",useViewTransition:l="",elements:i=""}){if(!ft(mr,r))throw e.error("PatchElementsInvalidMode",{mode:r});if(!t&&r!=="outer"&&r!=="replace")throw e.error("PatchElementsExpectedSelector");if(!ft(pr,n))throw e.error("PatchElementsInvalidNamespace",{namespace:n});let a={selector:t,mode:r,namespace:n,useViewTransition:l.trim()==="true",elements:i};Ft&&l?document.startViewTransition(()=>mt(e,a)):mt(e,a)}});var mt=({error:e},{selector:t,mode:r,namespace:n,elements:l})=>{let i=l.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,""),a=/<\/html>/.test(i),s=/<\/head>/.test(i),o=/<\/body>/.test(i),u=n==="svg"?"svg":n==="mathml"?"math":"",c=u?`<${u}>${l}</${u}>`:l,f=new DOMParser().parseFromString(a||s||o?l:`<body><template>${c}</template></body>`,"text/html"),h=document.createDocumentFragment();if(a)h.appendChild(f.documentElement);else if(s&&o)h.appendChild(f.head),h.appendChild(f.body);else if(s)h.appendChild(f.head);else if(o)h.appendChild(f.body);else if(u){let d=f.querySelector("template").content.querySelector(u);for(let m of d.childNodes)h.appendChild(m)}else h=f.querySelector("template").content;if(!t&&(r==="outer"||r==="replace"))for(let d of h.children){let m;if(d instanceof HTMLHtmlElement)m=document.documentElement;else if(d instanceof HTMLBodyElement)m=document.body;else if(d instanceof HTMLHeadElement)m=document.head;else if(m=document.getElementById(d.id),!m){console.warn(e("PatchElementsNoTargetsFound"),{element:{id:d.id}});continue}ht(r,d,[m])}else{let d=document.querySelectorAll(t);if(!d.length){console.warn(e("PatchElementsNoTargetsFound"),{selector:t});return}ht(r,h,d)}},Ue=new WeakSet;for(let e of document.querySelectorAll("script"))Ue.add(e);var Ht=e=>{let t=e instanceof HTMLScriptElement?[e]:e.querySelectorAll("script");for(let r of t)if(!Ue.has(r)){let n=document.createElement("script");for(let{name:l,value:i}of r.attributes)n.setAttribute(l,i);n.text=r.text,r.replaceWith(n),Ue.add(n)}},pt=(e,t,r)=>{for(let n of e){let l=t.cloneNode(!0);Ht(l),n[r](l)}},ht=(e,t,r)=>{switch(e){case"remove":for(let n of r)n.remove();break;case"outer":case"inner":for(let n of r)yr(n,t.cloneNode(!0),e),Ht(n);break;case"replace":pt(r,t,"replaceWith");break;case"prepend":case"append":case"before":case"after":pt(r,t,e)}},$=new Map,Z=new Set,G=new Map,re=new Set,X=document.createElement("div");X.hidden=!0;var ce=fe("ignore-morph"),hr=`[${ce}]`,yr=(e,t,r="outer")=>{if(Q(e)&&Q(t)&&e.hasAttribute(ce)&&t.hasAttribute(ce)||e.parentElement?.closest(hr))return;let n=document.createElement("div");n.append(t),document.body.insertAdjacentElement("afterend",X);let l=e.querySelectorAll("[id]");for(let{id:s,tagName:o}of l)G.has(s)?re.add(s):G.set(s,o);e instanceof Element&&e.id&&(G.has(e.id)?re.add(e.id):G.set(e.id,e.tagName)),Z.clear();let i=n.querySelectorAll("[id]");for(let{id:s,tagName:o}of i)Z.has(s)?re.add(s):G.get(s)===o&&Z.add(s);for(let s of re)Z.delete(s);G.clear(),re.clear(),$.clear();let a=r==="outer"?e.parentElement:e;vt(a,l),vt(n,i),It(a,n,r==="outer"?e:null,e.nextSibling),X.remove()},It=(e,t,r=null,n=null)=>{e instanceof HTMLTemplateElement&&t instanceof HTMLTemplateElement&&(e=e.content,t=t.content),r??=e.firstChild;for(let l of t.childNodes){if(r&&r!==n){let i=vr(l,r,n);if(i){if(i!==r){let a=r;for(;a&&a!==i;){let s=a;a=a.nextSibling,Be(s)}}Fe(i,l),r=i.nextSibling;continue}}if(l instanceof Element&&Z.has(l.id)){let i=document.getElementById(l.id),a=i;for(;a=a.parentNode;){let s=$.get(a);s&&(s.delete(l.id),s.size||$.delete(a))}Rt(e,i,r),Fe(i,l),r=i.nextSibling;continue}if($.has(l)){let i=l.namespaceURI,a=l.tagName,s=i&&i!=="http://www.w3.org/1999/xhtml"?document.createElementNS(i,a):document.createElement(a);e.insertBefore(s,r),Fe(s,l),r=s.nextSibling}else{let i=document.importNode(l,!0);e.insertBefore(i,r),r=i.nextSibling}}for(;r&&r!==n;){let l=r;r=r.nextSibling,Be(l)}},vr=(e,t,r)=>{let n=null,l=e.nextSibling,i=0,a=0,s=$.get(e)?.size||0,o=t;for(;o&&o!==r;){if(yt(o,e)){let u=!1,c=$.get(o),f=$.get(e);if(f&&c){for(let h of c)if(f.has(h)){u=!0;break}}if(u)return o;if(!n&&!$.has(o)){if(!s)return o;n=o}}if(a+=$.get(o)?.size||0,a>s)break;n===null&&l&&yt(o,l)&&(i++,l=l.nextSibling,i>=2&&(n=void 0)),o=o.nextSibling}return n||null},yt=(e,t)=>e.nodeType===t.nodeType&&e.tagName===t.tagName&&(!e.id||e.id===t.id),Be=e=>{$.has(e)?Rt(X,e,null):e.parentNode?.removeChild(e)},Rt=Be.call.bind(X.moveBefore??X.insertBefore),gr=fe("preserve-attr"),Fe=(e,t)=>{let r=t.nodeType;if(r===1){let n=e,l=t,i=n.hasAttribute("data-scope-children");if(n.hasAttribute(ce)&&l.hasAttribute(ce))return e;n instanceof HTMLInputElement&&l instanceof HTMLInputElement&&l.type!=="file"?l.getAttribute("value")!==n.getAttribute("value")&&(n.value=l.getAttribute("value")??""):n instanceof HTMLTextAreaElement&&l instanceof HTMLTextAreaElement&&(l.value!==n.value&&(n.value=l.value),n.firstChild&&n.firstChild.nodeValue!==l.value&&(n.firstChild.nodeValue=l.value));let a=(t.getAttribute(gr)??"").split(" ");for(let{name:s,value:o}of l.attributes)n.getAttribute(s)!==o&&!a.includes(s)&&n.setAttribute(s,o);for(let s=n.attributes.length-1;s>=0;s--){let{name:o}=n.attributes[s];!l.hasAttribute(o)&&!a.includes(o)&&n.removeAttribute(o)}i&&!n.hasAttribute("data-scope-children")&&n.setAttribute("data-scope-children",""),n.isEqualNode(l)||It(n,l),i&&n.dispatchEvent(new CustomEvent("datastar:scope-children",{bubbles:!1}))}return(r===8||r===3)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),e},vt=(e,t)=>{for(let r of t)if(Z.has(r.id)){let n=r;for(;n&&n!==e;){let l=$.get(n);l||(l=new Set,$.set(n,l)),l.add(r.id),n=n.parentElement}}};Nt({name:"datastar-patch-signals",apply({error:e},{signals:t,onlyIfMissing:r}){if(t){let n=r?.trim()==="true";Y(Ze(t),{ifMissing:n})}else throw e("PatchSignalsExpectedSignals")}});})();
